@{
    Layout = null;
}

@using LifeManagement.Extensions
@using LifeManagement.Resources
@model IEnumerable<LifeManagement.Models.DB.Task>



@foreach (var item in Model) {
    if (!item.CompletedOn.HasValue)
    {
        <div class="task">
       @*     <div>@Html.ActionLink(" ", "Complete", "Tasks", new {taskId = item.Id}, new {@class = "taskChackBox"})</div>
            <div class="taskComleateLevel">
                <input @*class="knob" data-width="45" data-angleoffset=-179 data-anglearc=358 data-fgcolor=" #4e888a" value="0" onsubmit="My()">
            </div>*@
            <div class="taskComleateLevel" data-id = @item.Id>
                <input class="knob" data-width="45" data-angleoffset=-179 data-anglearc=358 data-fgcolor=" #4e888a" value='@item.CompleteLevel'>
            </div>
            <div class="taskInfo">
                <div class="name">
                    @if (item.IsUrgent)
                    {
                        <div class="Urgent"></div>
                    }
                    @item.Name
                </div>
                <div>
                    @Html.DialogFormLink(" ", "moreInfoIcon", Url.Action("Edit", "Tasks", new { id = item.Id }), ResourceScr.Details, "body-LifeManagment", "", 700)
                </div>
                <span class="time">@item.ConvertTimeToNice()</span>
                <div class="tags">
                    @foreach (var tag in item.Tags)
                    {
                        <text>@tag.Name </text>
                    }
                </div>
            </div>
        </div>
    }
    else
    {
        <div class="Сompleted">
            
            <div>@Html.ActionLink(" ", "UnComplete", "Tasks", new { taskId = item.Id }, new { @class = "taskChackBoxChacked" })</div>
            <div class="taskInfo">
                <div class="name">
                    @if (item.IsUrgent)
                    {
                        <div class="Urgent"></div>
                    }
                    @item.Name
                </div>
                <div>
                    @Html.DialogFormLink(" ", "moreInfoIcon", Url.Action("Display", "Tasks", new { id = item.Id }), ResourceScr.Details, "body-LifeManagment", "", 700)
                </div>
            <span class="time">@item.CompletedOn</span>
            <div class="tags">
                @foreach (var tag in item.Tags)
                {
                    <text>@tag.Name </text>
                }
            </div>
        </div>
    </div>
    }

}